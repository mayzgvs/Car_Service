<Page x:Class="Car_Service.Pages.PartsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:Car_Service.Pages"
      mc:Ignorable="d" 
      d:DesignHeight="600" d:DesignWidth="800"
      Title="Запчасти" IsVisibleChanged="PartsPage_IsVisibleChanged">

    <Grid Background="#FF2D3748">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Список запчастей в виде карточек -->
        <ListView x:Name="LViewParts" ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                  Style="{StaticResource ListViewStyle}">
            <ListView.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel Orientation="Horizontal" HorizontalAlignment="Center"/>
                </ItemsPanelTemplate>
            </ListView.ItemsPanel>
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Border Margin="10" Width="280" Height="340"
                            Background="#FF4A5568" CornerRadius="8"
                            BorderBrush="#FF718096" BorderThickness="1"
                            Padding="5">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="180"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Контейнер для изображения -->
                            <Border Grid.Row="0" CornerRadius="4" Background="#FF2D3748"
                                    Margin="5" Padding="5"
                                    BorderThickness="1" BorderBrush="#FF718096">
                                <Image Source="{Binding Picture}" 
                                       Stretch="UniformToFill" 
                                       HorizontalAlignment="Center" 
                                       VerticalAlignment="Center"
                                       MaxHeight="160" MaxWidth="240">
                                    <Image.Effect>
                                        <DropShadowEffect BlurRadius="10" 
                                                          ShadowDepth="3" 
                                                          Opacity="0.5"
                                                          Color="Black"/>
                                    </Image.Effect>
                                </Image>
                            </Border>

                            <!-- Информация о запчасти -->
                            <StackPanel Grid.Row="1" Margin="10,5">
                                <TextBlock Style="{StaticResource TextBlockStyle}"
                                           Text="{Binding PartName}"
                                           FontWeight="SemiBold"
                                           FontSize="16"
                                           Margin="0,0,0,8"/>

                                <TextBlock Style="{StaticResource TextBlockStyle}"
                                           Text="{Binding Price, StringFormat=₽ {0:N0}}"
                                           Foreground="#f57d31"
                                           FontSize="16"
                                           FontWeight="Bold"
                                           Margin="0,0,0,8"/>

                                <StackPanel Orientation="Horizontal" Margin="0,5,0,0">
                                    <Path Data="M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z"
                                          Fill="#A0AEC0" Stretch="Uniform"
                                          Width="14" Height="14"
                                          Margin="0,0,5,0"/>
                                    <TextBlock Text="{Binding Inventory.Adress}"
                                               Foreground="#A0AEC0"
                                               FontSize="14"
                                               VerticalAlignment="Center"/>
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </Border>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <!-- Панель кнопок -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" 
                    HorizontalAlignment="Center" Margin="0,10">
            <Button Content="Добавить" 
                    Style="{StaticResource PrimaryButtonStyle}" 
                    Width="140" Height="40"
                    Click="BtnAdd_Click" Margin="0,0,10,0"/>

            <Button Content="Редактировать"
                    Style="{StaticResource PrimaryButtonStyle}" 
                    Width="140" Height="40"
                    Click="BtnRed_Click" Margin="0,0,10,0"/>

            <Button Content="Удалить" 
                    Style="{StaticResource PrimaryButtonStyle}" 
                    Width="140" Height="40"
                    Click="BtnDelete_Click" Margin="0,0,10,0"/>

            <Button Content="Назад" 
                    Style="{StaticResource ActiveButtonStyle}" 
                    Width="140" Height="40"
                    Click="BtnBack_Click"/>
        </StackPanel>
    </Grid>
</Page>